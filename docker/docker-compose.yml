# version: "2"
# services:
#   db:
#     container_name: ddjj_db
#     image: mysql:56
#     ports:
#       - "3306:3306"
#     environment:
#       - MYSQL_ROOT_PASSWORD= toor
#       - MYSQL_DATABASE = ddjj
#     # volumes:
#     #   - /Users/Adam/Development/data/mysql:/var/lib/mysql
#   django:
#     container_name: ddjj_django
#     build:
#       context: .
#       dockerfile: ddjj_admin
#     # image: docker_tutorial_django
#     stdin_open: true
#     tty: true
#     # volumes:
#     #   - .:/var/www/myproject
#     ports:
#       - "8000:8000"
#     links:
#       - db
#     # environment:
#     #   - DATABASE_URL=mysql://root:itsasecret@db:3306/docker_tutorial_django_db
#   rails:
#     container_name: ddjj_rails
#     build:
#       context: .
#       dockerfile: Dockerfile
#     # image: docker_tutorial_django
#     stdin_open: true
#     tty: true
#     # volumes:
#     #   - .:/var/www/myproject
#     ports:
#       - "5000:5000"
#     links:
#       - db
#     # environment:
#     #   - DATABASE_URL=mysql://root:itsasecret@db:3306/docker_tutorial_django_db

version: '3'

services:
  db:
    # container_name: ddjj_db
    image: mysql:56
    # ports:
    #   - "3306:3306"
    environment:
      - MYSQL_ROOT_PASSWORD= toor
      - MYSQL_DATABASE = ddjj
    # volumes:
    #   - /Users/Adam/Development/data/mysql:/var/lib/mysql
  django:
    build:
      context: .
      dockerfile: ddjj_admin
    # command: python3 manage.py runserver 0.0.0.0:8000
    # volumes:
    #   - .:/code
    ports:
      - "8000:8000"
    depends_on:
      - db
  rails:
    # container_name: ddjj_rails
    build:
      context: .
      dockerfile: Dockerfile
    # image: docker_tutorial_django
    stdin_open: true
    tty: true
    # volumes:
    #   - .:/var/www/myproject
    ports:
      - "5000:5000"
    links:
      - db
    # environment:
    #   - DATABASE_URL=mysql://root:itsasecret@db:3306/docker_tutorial_django_db
